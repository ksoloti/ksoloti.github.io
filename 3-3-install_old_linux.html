<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Mono">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Install on Linux - Ksoloti-legacy</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  </head>

   <body lang="en-US" link="#8080F0" vlink="#A040A0" dir="ltr">
    <div id="navbar">
      <a href="index.html">About</a>
      <a href="2-background.html">Background</a>
      <a href="3-install.html">Install</a>
      <a href="4-getting_started.html">Getting&nbsp;Started</a>
      <a href="5-resources.html">Resources</a>
      <a href="6-gills.html">Gills</a>
      <a href="7-tutorials.html">Tutorials</a>
    </div>
    <main>
      <div>

        <div style="text-align: center;">
          <h1>3.3. Install old Patcher on Linux</h1>
        </div>

          <div style="text-align: center;">
            <img src="img/linux_patcher_window.png">
            <br/>
            <i>Main window of the Axoloti Patcher.</i>
          </div>
        <div class="textparagraph">
          <p>
            <b style="font-size: 1.5em;">If you already have the original Axoloti Patcher installed, please skip to step 3. The runtime and Patcher you'd be installing in this guide is the exact same piece of software. Only the <i>Firmware Dir</i> needs to be changed and the <i>ksoloti-objects</i> need to be added to use the Patcher with the Ksoloti Core.</b>
          </p>
          <p>
            The install process for <b>Ksoloti-legacy</b> is identical to <b>Axoloti</b> with a few extra steps. To reduce size we split the application into two parts, the main <b>Axoloti application</b>, and a <b>runtime</b> which contains other required files. You must download and install both.
          </p>
          <p>
            The official installer only supports Debian-based systems. If you want  to run Axoloti on Fedora, Arch, or Gentoo (or possibly any other Linux) you have to build it from source. More information <a target="_blank" href="https://sebiik.github.io/community.axoloti.com.backup/t/installing-on-linux/56.html">here</a>.
          </p>
          <p>
            <b>If your Ksoloti Core is currently connected via USB, disconnect it now.</b>
          </p>
          <p>
            <ol type="1">

              <br/><li>
                <p>
                Install the <b>runtime</b>. Head to the <a target="_blank" href="https://github.com/axoloti/axoloti/releases/tag/1.0.12-2">Axoloti Releases</a> page on Github and download the latest <code>axo_runtime_linux_(version).tgz</code> (at the time of writing: axo_runtime_linux_1.0.12.tgz).
                </p>
                <p>
                <div style="text-align: center;">
                  <img src="img/linux_axoloti_runtime_download.png">
                </div>
                </p>
                <p>
                  Extract the tgz file and move the folder <code>axoloti_runtime</code> to your home directory.
                  The command should be something like:
                </p>
                <p>
                  <code> tar zxvf axo_runtime_linux_1.0.12.tgz -C ~</code>
                </p>
                <p>
                  Check that you have the correct folder structure:
                </p>
                <p>
                <ul>
                  <li>
                    <code>/home/(your username)/axoloti_runtime/platform_linux/</code>
                  </li>
                </ul>
                </p>
                <p>
                  The <b>Axoloti runtime</b> is now installed. You will not have to move or edit it unless there is a big update, or you reinstall your OS, etc.
                </p>
              </li>

              <br/><li>
                <p>
                  Install the <b>Patcher</b>. From the link in step 1, download the newest <code>axoloti-linux-(version).deb</code> (at the time of writing: axoloti-linux-1.0.12-2.deb).
                </p>
                <p>
                <div style="text-align: center;">
                  <img src="img/linux_axoloti_patcher_download.png">
                </div>
                </p>
                <p>
                  To install it run the following command:
                </p>
                <p>
                  <code>sudo dpkg -i ./axoloti-linux-1.0.12-2.deb</code>
                </p>
                <p>
                  Enter your password and wait for the install to finish. This should install the <b>Patcher</b> and create an entry for Axoloti in your start menu.
                </p>
              </li>

              <br/><li>
                <p>
                The <b>Patcher</b> is now installed. Now we need to link it to the custom <b>ksoloti-legacy</b> firmware. Head to the <a target="_blank" href="https://github.com/ksoloti/ksoloti-legacy">ksoloti-legacy</a> repository on Github and download the source code as a zip file.
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/ksoloti_legacy_download_zip.png">
                  </div>
                </p>
                <p>
                  Extract the file <code>ksoloti-master.zip</code> (or ksoloti-legacy-master.zip, or similar) to a location of your choice. I usually place it in my <code>~/Documents</code> folder.
                </p>
              </li>

              <br/><li>
                <p>
                  Open the start menu, type in <b>Axoloti</b>, and start it (this is the <b>Patcher</b>).
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_patcher_window.png">
                  </div>
                </p>
              </li>

              <br/><li>
                <p>
                  In the Patcher, open the <b>File</b> menu and click on <b>Preferences...</b> In the resulting window you will see an option called <b>Firmware Dir</b>.
                </p>
                <p>
                  Click on <b>Select</b> and navigate to the path where you extracted the Ksoloti zip from step 3. Then find the subfolder <code>/firmware</code> in the <code>ksoloti-master</code> folder (or similar) and click <b>Open</b>.
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_preferences_firmware_dir.png">
                  </div>
                </p>
                <p>
                  When you're done the <b>Firmware Dir</b> field should read something like <code>[...]/ksoloti-master/firmware</code>. It is important that you point the directory to the <code>[...]/firmware</code> subfolder. Click <b>OK</b>.
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_preferences_firmware_dir_set.png">
                  </div>
                </p>
              </li>

              <br/><li>
                <p>
                  Close the <b>Patcher</b> and restart it for the new firmware path to take effect.
                </p>
              </li>

              <br/><li>
                <p>
                  Let's do a first test to make sure all the directories are correctly set. Open the <b>Board</b> menu and click <b>Firmware > Compile</b>. There should be a lot of text running across the console and it should end with the message <b>Done compiling firmware</b>. This is good news – everything is set up correctly so far!
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_patcher_done_compiling_firmware.png">
                  </div>
                </p>
              </li>

              <br/><li>
                <p>
                  We now need to tell the <b>Patcher</b> to fetch the custom <b>ksoloti-objects</b> repository for us. It contains the custom objects so that you can use all GPIO and functions of the Ksoloti Core.
                </p>
                <p>
                  Open the <b>File</b> menu and click on <b>Preferences...</b> again. In the resulting window you will see a table containing items like “factory”, “home” and “community”. Click on the “<b>+</b>” button to the right of it.
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_preferences_add_library.png">
                  </div>
                </p>
                <p>
                  The “add library” window will appear. This is where we set up the remote address to the <b>ksoloti-objects</b> repository. Enter the following settings:
                </p>
                <p>
                  <b>Type:</b> <code>git</code>
                </p>
                <p>
                  <b>ID:</b> <code>ksoloti-objects</code>
                </p>
                <p>
                  <b>Directory:</b> Click <b>Select</b> and select a folder of your choice. Then, add the string <code>/ksoloti-objects/</code> to the path in the text field. This will let Git automatically create the folder <code>ksoloti-objects</code> in the folder you have selected. In this example I again chose my Documents folder then added <code>/ksoloti-objects/</code> to the end of the path. <b>Make sure there is a slash "/" at the end of the path.</b>
                </p>
                  <b>Remote Path:</b> <code>https://github.com/ksoloti/ksoloti-objects.git</code>
                </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_add_ksoloti_library.png">
                  </div>
                </p>
                <p>
                  Click <b>Init</b> and confirm. This should create the <code>ksoloti-objects</code> folder in your selected folder and fill it with the custom Ksoloti objects so the <b>Patcher</b> can find and use them. Click <b>OK</b>, and <b>OK</b> again to close the preferences.
                </p>
              </li>

              <br/><li>
                  <p>
                    Connect the <b>Ksoloti Core</b> board. Linux should automatically detect it as a USB device. If you want to make sure, run <code>lsusb</code> in a terminal and confirm that there is a device called "Van Ooijen Technische Informatica Ksoloti Core" (or similar) in the list. If there isn't, head to the <code>ksoloti-master/platform_linux</code> subfolder, open a terminal there and run <code>chmod 755 add_udev_rules.sh && ./add_udev_rules.sh</code> from inside it. Disconnect and reconnect your <b>Ksoloti Core</b>.
                  </p>
              </li>

              <br/><li>
                  <p>
                    In the <b>Patcher</b>, click on <b>Connect</b>. You might get a <b>Firmware CRC mismatch</b> warning. This is because the firmware has been updated since your Ksoloti board was shipped. Click <b>Yes</b>.
                  </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_firmware_crc_mismatch.png">
                  </div>
                </p>
                  <p>
                    The <b>Patcher</b> should update the board automatically. Wait until it is done. When only the green LED lights up steady, you can click on <b>Connect</b> again.
                  </p>
                <p>
                  <div style="text-align: center;">
                    <img src="img/linux_firmware_crc_flashing.png">
                  </div>
                </p>
                </li>
              </li>

            </ol>
            <br/>
            <p>
              <b>Congratulations, you're done with the tedious setup process and finally ready to open some patches!</b>
            </p>
            <p style="font-size: 1.5em;">
              As of now, either <b>Axoloti Core</b> or <b>Ksoloti Core</b> can connect to the old Patcher at a time, not simultaneously. This is because the Patcher was not written with supporting multiple boards in mind. If you ever want to revert the <b>Patcher</b> to connect to <b>Axoloti Core</b>, all you have to do is set the <i>Firmware Dir</i> back to <code>/opt/Axoloti/app/firmware</code> like in the first screenshot in step 5, then restart the <b>Patcher</b>.
            </p>
          <p>
            We are working on a standalone <b>Ksoloti</b> version for the <b>Patcher</b>. This will simplify the installation and make it possible to run the original <b>Patcher</b> with your <b>Axoloti Core</b>, and the <b>Ksoloti</b> Patcher with the <b>Ksoloti Core</b> at the same time.</b>
          </p>
          </p>
        </div>

      </div>
    </main>
  <script src="index.js"></script>
  </body>
</html>
